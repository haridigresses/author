@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --editor-width: 65ch;
  --editor-padding: 2rem;
}

body {
  @apply bg-gray-50 text-gray-900;
}

/* Sleek scrollbars */
* {
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
}

*:hover {
  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;
}

.dark *:hover {
  scrollbar-color: rgba(255, 255, 255, 0.15) transparent;
}

*::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 3px;
}

*:hover::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

*:hover::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

.dark *:hover::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
}

.dark *:hover::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* TipTap editor styles */
.ProseMirror {
  @apply outline-none;
  max-width: var(--editor-width);
  margin: 0 auto;
  padding: var(--editor-padding);
  min-height: 100vh;
}

.ProseMirror p {
  @apply mb-4 leading-relaxed;
}

.ProseMirror > h1:first-child {
  @apply text-4xl font-bold pb-4 mb-6 border-b border-gray-200;
  margin-top: 0;
}

.ProseMirror h1 {
  @apply text-4xl font-bold mb-6 mt-8;
}

.ProseMirror h2 {
  @apply text-3xl font-semibold mb-4 mt-6;
}

.ProseMirror h3 {
  @apply text-2xl font-semibold mb-3 mt-5;
}

.ProseMirror:focus {
  @apply outline-none;
}

/* Callout styles */
.ProseMirror .callout {
  @apply my-4 p-4 rounded-lg border-l-4 bg-gray-50;
}

.ProseMirror .callout[data-type="info"] {
  @apply border-blue-500 bg-blue-50;
}

.ProseMirror .callout[data-type="warning"] {
  @apply border-yellow-500 bg-yellow-50;
}

.ProseMirror .callout[data-type="error"] {
  @apply border-red-500 bg-red-50;
}

.ProseMirror .callout[data-type="success"] {
  @apply border-green-500 bg-green-50;
}

/* Table styles */
.ProseMirror table {
  @apply border-collapse table-auto w-full my-4;
}

.ProseMirror table td,
.ProseMirror table th {
  @apply border border-gray-300 px-4 py-2;
}

.ProseMirror table th {
  @apply bg-gray-100 font-semibold;
}

/* Generated image styles */
.ProseMirror img {
  @apply max-w-full rounded-lg;
}

.ProseMirror img[data-generated="true"],
.generated-image {
  @apply my-4 rounded-lg max-w-full;
}

.generated-image-placeholder {
  @apply my-4 p-8 rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 flex items-center gap-3 text-gray-500 text-sm;
}

.generated-image-caption {
  @apply text-xs text-gray-400 mt-1 italic;
}

.generating-spinner {
  @apply w-5 h-5 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin;
}

/* tldraw Diagram Styles */
.tldraw-diagram-container {
  @apply my-4 rounded-lg border border-gray-200 overflow-hidden relative;
  min-height: 300px;
}

.tldraw-diagram-container.selected {
  @apply ring-2 ring-blue-400;
}

.tldraw-diagram-placeholder {
  @apply my-4 p-8 rounded-lg border-2 border-dashed border-gray-300 bg-gray-50
         flex flex-col items-center justify-center gap-3 text-gray-500 text-sm;
  min-height: 300px;
}

.tldraw-diagram-caption {
  @apply absolute bottom-0 left-0 right-0 px-3 py-2 bg-gray-100/90
         text-xs text-gray-500 italic backdrop-blur-sm;
}

.tldraw-embed {
  @apply w-full h-full;
}

.tldraw-loading {
  @apply flex items-center justify-center h-[300px] text-gray-400;
}

/* Dark mode: tldraw */
.dark .tldraw-diagram-container {
  @apply border-gray-700;
}

.dark .tldraw-diagram-placeholder {
  @apply border-gray-600 bg-gray-800;
}

.dark .tldraw-diagram-caption {
  @apply bg-gray-800/90 text-gray-400;
}

.dark .tldraw-loading {
  @apply text-gray-500;
}

/* Track Changes - insertion and deletion marks */
.ProseMirror ins {
  @apply bg-green-100 text-green-800 no-underline;
  text-decoration: none;
}

.ProseMirror del {
  @apply bg-red-100 text-red-600 line-through;
}

.dark .ProseMirror ins {
  @apply bg-green-900/40 text-green-300;
}

.dark .ProseMirror del {
  @apply bg-red-900/40 text-red-400;
}

/* Ghost text (tab completion) */
.ghost-text {
  @apply text-gray-400 pointer-events-none;
}

.ghost-text-loading {
  @apply animate-pulse;
}

/* Hemingway highlights */
.mencken-very-long {
  @apply bg-red-100 rounded-sm;
}

.mencken-long {
  @apply bg-yellow-100 rounded-sm;
}

.mencken-passive {
  @apply bg-green-100 rounded-sm;
}

.mencken-adverb {
  @apply bg-blue-100 rounded-sm;
}

.mencken-complex {
  @apply bg-purple-100 rounded-sm;
}

.mencken-transition {
  @apply bg-orange-100 rounded-sm;
}

/* Mencken legend in toolbar */
.mencken-legend {
  @apply flex items-center gap-1 ml-1;
}

.mencken-legend-item {
  @apply text-[10px] px-1.5 py-0.5 rounded font-medium;
}

.mencken-legend-red {
  @apply bg-red-100 text-red-700;
}

.mencken-legend-green {
  @apply bg-green-100 text-green-700;
}

.mencken-legend-blue {
  @apply bg-blue-100 text-blue-700;
}

.mencken-legend-purple {
  @apply bg-purple-100 text-purple-700;
}

.mencken-legend-orange {
  @apply bg-orange-100 text-orange-700;
}

/* Additional editor element styles */
.ProseMirror blockquote {
  @apply border-l-4 border-gray-300 pl-4 my-4 text-gray-600 italic;
}

.ProseMirror code {
  @apply bg-gray-100 rounded px-1 py-0.5 text-sm font-mono text-pink-600;
}

.ProseMirror pre {
  @apply bg-gray-900 text-gray-100 rounded-lg p-4 my-4 overflow-x-auto;
}

.ProseMirror pre code {
  @apply bg-transparent text-inherit p-0;
}

.ProseMirror hr {
  @apply my-6 border-gray-200;
}

.ProseMirror ul {
  @apply list-disc pl-6 mb-4;
}

.ProseMirror ol {
  @apply list-decimal pl-6 mb-4;
}

.ProseMirror li {
  @apply mb-1;
}

/* Modern task list / checkbox styling */
.ProseMirror ul[data-type="taskList"] {
  @apply list-none pl-0 my-2;
}

.ProseMirror ul[data-type="taskList"] li {
  @apply flex items-start gap-2 my-1;
}

.ProseMirror ul[data-type="taskList"] li > label {
  @apply flex-shrink-0 flex items-center justify-center w-5 h-6;
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
  @apply appearance-none w-4 h-4 border-2 border-gray-300 rounded cursor-pointer transition-all m-0;
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:hover {
  @apply border-blue-400;
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:focus {
  @apply outline-none ring-2 ring-blue-200;
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:checked {
  @apply bg-blue-500 border-blue-500;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
  background-size: 100% 100%;
  background-position: center;
  background-repeat: no-repeat;
}

.ProseMirror ul[data-type="taskList"] li > div {
  @apply flex-1 min-w-0;
}

.ProseMirror ul[data-type="taskList"] li[data-checked="true"] > div {
  @apply text-gray-400 line-through;
}

.dark .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
  @apply border-gray-600 bg-transparent;
}

.dark .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:checked {
  @apply bg-blue-600 border-blue-600;
}

.ProseMirror mark {
  @apply bg-yellow-200 rounded-sm px-0.5;
}

.ProseMirror a {
  @apply text-blue-600 underline cursor-pointer;
}

.ProseMirror sup {
  @apply text-xs;
}

.ProseMirror sub {
  @apply text-xs;
}

.ProseMirror .is-empty::before {
  @apply text-gray-400 float-left h-0 pointer-events-none;
  content: attr(data-placeholder);
}

.ProseMirror > h1.is-empty:first-child::before {
  @apply text-gray-300 text-4xl font-bold;
}

.ProseMirror .is-empty.is-editor-empty::before {
  @apply text-gray-400;
}

/* Hide placeholder inside lists, blockquotes, tables, etc */
.ProseMirror li .is-empty::before,
.ProseMirror blockquote .is-empty::before,
.ProseMirror table .is-empty::before,
.ProseMirror [data-type="taskItem"] .is-empty::before {
  content: none;
}

/* Toolbar */
.toolbar {
  @apply flex-shrink-0 z-10 bg-white border-b border-gray-200 px-4 py-2 flex flex-wrap items-center gap-1.5 text-sm;
}

.toolbar-btn {
  @apply px-2 py-1 border border-gray-300 rounded hover:bg-gray-50 transition-colors text-xs font-medium relative;
  min-width: 40px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.toolbar-shortcut {
  @apply absolute -bottom-5 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-[10px] px-1 py-0.5 rounded whitespace-nowrap z-20;
  pointer-events: none;
}

.toolbar-btn:disabled {
  @apply opacity-30 cursor-not-allowed;
}

.toolbar-btn-active {
  @apply bg-gray-200 border-gray-400;
}

.toolbar-btn-accept {
  @apply border-green-400 text-green-700 hover:bg-green-50;
}

.toolbar-btn-reject {
  @apply border-red-400 text-red-700 hover:bg-red-50;
}

.toolbar-separator {
  @apply w-px h-5 bg-gray-200 mx-1;
}

.toolbar-hint {
  @apply text-gray-400 text-xs;
}

/* Toolbar container */
.toolbar-container {
  @apply flex-shrink-0 z-10 bg-white border-b border-gray-200;
}

/* Toolbar expand/collapse toggle */
.toolbar-expand-btn {
  @apply px-2 py-1 rounded text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-all flex items-center justify-center;
}
.toolbar-expand-btn svg {
  transition: transform 0.2s ease;
}
.toolbar-expand-btn-open svg {
  transform: rotate(180deg);
}

/* Second toolbar row */
.toolbar-second-row {
  @apply px-4 py-2 flex flex-wrap items-center gap-1.5 text-sm border-t border-gray-100 bg-gray-50;
  animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Mode buttons (Track / Mencken) */
.toolbar-mode-btn {
  @apply flex items-center gap-1.5 px-2.5 py-1 rounded text-xs font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors cursor-pointer border border-transparent;
}

.toolbar-mode-btn-active {
  @apply bg-blue-500 text-white border-blue-500 hover:bg-blue-600 hover:text-white;
}

.toolbar-mode-icon {
  @apply text-sm leading-none;
}

.toolbar-mode-label {
  @apply leading-none;
}

/* Dark mode: Toolbar container and second row */
.dark .toolbar-container {
  @apply bg-gray-800 border-gray-700;
}

.dark .toolbar-expand-btn {
  @apply text-gray-500 hover:text-gray-300 hover:bg-gray-700;
}

.dark .toolbar-second-row {
  @apply border-gray-700 bg-gray-900;
}

/* Dark mode: Mode buttons */
.dark .toolbar-mode-btn {
  @apply text-gray-400 hover:text-gray-200 hover:bg-gray-700;
}

.dark .toolbar-mode-btn-active {
  @apply bg-blue-600 text-white border-blue-600 hover:bg-blue-500 hover:text-white;
}

/* Modern toggle switches */
.toolbar-switch {
  @apply flex items-center gap-2 px-1.5 py-1 rounded text-xs font-medium text-gray-500 hover:text-gray-700 transition-colors cursor-pointer;
}

.toolbar-switch-track {
  @apply relative w-7 h-4 bg-gray-300 rounded-full transition-colors;
}

.toolbar-switch-on .toolbar-switch-track {
  @apply bg-blue-500;
}

.toolbar-switch-thumb {
  @apply absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full shadow transition-transform;
}

.toolbar-switch-on .toolbar-switch-thumb {
  @apply translate-x-3;
}

.toolbar-switch-label {
  @apply text-gray-600;
}

.toolbar-switch-on .toolbar-switch-label {
  @apply text-blue-600;
}

/* Legacy toggle (keeping for reference) */
.toolbar-toggle {
  @apply flex items-center gap-1.5 cursor-pointer select-none text-gray-600;
}

.toolbar-image-form {
  @apply flex items-center gap-1;
}

.toolbar-image-input {
  @apply px-2 py-1 border border-gray-300 rounded text-sm w-48 outline-none focus:border-blue-400;
}

/* Command palette */
.command-palette {
  @apply z-50 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[200px];
}

.command-palette-item {
  @apply flex items-center gap-2 w-full px-3 py-2 text-left text-sm hover:bg-gray-50 transition-colors;
}

.command-palette-shortcut {
  @apply w-5 h-5 flex items-center justify-center text-xs font-mono bg-gray-100 rounded text-gray-500;
}

/* Diff view */
.diff-view {
  @apply z-50 bg-white rounded-lg shadow-lg border border-gray-200 p-4 min-w-[300px] max-w-[500px];
}

.diff-loading {
  @apply text-gray-500 text-sm py-4 text-center animate-pulse;
}

.diff-header {
  @apply mb-3 pb-2 border-b border-gray-100;
}

.diff-action-label {
  @apply text-xs font-medium uppercase tracking-wide text-gray-500;
}

.diff-content {
  @apply space-y-3 text-sm;
}

.diff-original {
  @apply p-2 bg-red-50 rounded border border-red-100;
}

.diff-suggested {
  @apply p-2 bg-green-50 rounded border border-green-100;
}

.diff-label {
  @apply text-xs font-medium text-gray-400 mb-1;
}

.diff-actions {
  @apply flex gap-2 mt-3 pt-2 border-t border-gray-100;
}

.diff-accept {
  @apply flex-1 px-3 py-1.5 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors;
}

.diff-reject {
  @apply flex-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 transition-colors;
}

/* Layout */
.editor-layout {
  @apply flex h-screen;
}

.editor-main {
  @apply flex-1 flex flex-col min-w-0 overflow-hidden;
}

.editor-scroll {
  @apply flex-1 overflow-y-auto;
}

/* Status bar */
.status-bar {
  @apply fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-1.5 text-xs text-gray-500 flex items-center gap-1 z-10;
}

.status-sep {
  @apply text-gray-300 mx-1;
}

/* Bubble menu */
.bubble-menu {
  @apply flex items-center gap-0.5 bg-white rounded-lg shadow-lg border border-gray-200 p-1;
}

.bubble-btn {
  @apply px-2 py-1 text-xs rounded hover:bg-gray-100 transition-colors font-medium;
}

.bubble-btn-active {
  @apply bg-gray-200;
}

.bubble-sep {
  @apply w-px h-4 bg-gray-200 mx-0.5;
}

/* Slash command menu */
.slash-menu {
  @apply bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[220px] max-h-[300px] overflow-y-auto;
}

.slash-menu-empty {
  @apply px-3 py-2 text-sm text-gray-400;
}

.slash-menu-item {
  @apply flex flex-col w-full px-3 py-2 text-left hover:bg-gray-50 transition-colors;
}

.slash-menu-item-active {
  @apply bg-gray-50;
}

.slash-menu-title {
  @apply text-sm font-medium;
}

.slash-menu-desc {
  @apply text-xs text-gray-400;
}

/* AI Sidebar */
.ai-sidebar {
  @apply w-80 h-full border-l border-gray-200 bg-white flex flex-col overflow-hidden transition-all duration-200;
}

.ai-sidebar-top {
  @apply flex-shrink-0 overflow-y-auto;
  max-height: 33%;
}

.ai-sidebar-chat {
  @apply flex-1 flex flex-col min-h-0;
}

.ai-sidebar-expanded {
  @apply w-[500px];
}

.ai-sidebar-header {
  @apply flex items-center justify-between p-3 border-b border-gray-200;
}

.ai-sidebar-header h3 {
  @apply text-sm font-semibold;
}

.ai-sidebar-close {
  @apply w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100;
}

.ai-collapse-btn {
  @apply w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100 text-sm;
}

.ai-sidebar-body {
  @apply p-3 flex flex-col gap-4 overflow-y-auto;
}

.ai-section {
  @apply flex flex-col gap-2;
}

.ai-section h4 {
  @apply text-xs font-semibold uppercase tracking-wide text-gray-500;
}

.ai-section-hint {
  @apply text-xs text-gray-400 -mt-1;
}

.ai-btn-grid {
  @apply flex flex-wrap gap-1;
}

.ai-action-btn {
  @apply px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-50 transition-colors;
}

.ai-action-btn:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.ai-action-list {
  @apply flex flex-col gap-0.5;
}

.ai-action-row {
  @apply flex items-center gap-2 px-2 py-1.5 text-left rounded hover:bg-gray-50 transition-colors w-full;
}

.ai-action-row:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.ai-action-key {
  @apply w-5 h-5 flex items-center justify-center text-xs font-mono bg-gray-100 rounded text-gray-500 flex-shrink-0;
}

.ai-action-label {
  @apply text-xs font-medium flex-shrink-0;
}

.ai-action-desc {
  @apply text-xs text-gray-400 truncate;
}

.ai-sidebar-loading {
  @apply text-sm text-gray-400 animate-pulse py-4 text-center;
}

.ai-sidebar-result {
  @apply bg-gray-50 rounded p-3 text-sm border border-gray-200;
}

.ai-sidebar-result pre {
  @apply whitespace-pre-wrap text-xs leading-relaxed;
}

.ai-apply-btn {
  @apply mt-2 w-full px-3 py-1.5 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-colors;
}

.ai-result-close {
  @apply float-right w-5 h-5 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded hover:bg-gray-200 text-sm -mt-1 -mr-1;
}

.ai-edit-result {
  @apply bg-gray-50 rounded p-3 text-sm border border-gray-200 mt-2;
}

.ai-edit-result pre {
  @apply whitespace-pre-wrap text-xs leading-relaxed;
}

/* Chips */
.ai-subsection {
  @apply flex flex-col gap-1;
}

.ai-subsection-label {
  @apply text-xs text-gray-500;
}

.ai-chip-row {
  @apply flex flex-wrap gap-1;
}

.ai-chip {
  @apply px-2 py-1 text-xs border border-gray-300 rounded-full hover:bg-gray-50 hover:border-gray-400 transition-colors;
}

.ai-chip:disabled {
  @apply opacity-50 cursor-not-allowed;
}

/* Edit groups */
.ai-edit-groups {
  @apply flex flex-col gap-1;
}

.ai-edit-group {
  @apply flex flex-col;
}

.ai-edit-group-btn {
  @apply flex items-center justify-between px-3 py-2 text-xs font-medium border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-left;
}

.ai-edit-group-btn-active {
  @apply bg-gray-50 border-gray-400 rounded-b-none;
}

.ai-edit-group-btn:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.ai-edit-group-arrow {
  @apply text-[10px] text-gray-400;
}

.ai-edit-group-options {
  @apply flex flex-wrap gap-1 p-2 border border-t-0 border-gray-300 rounded-b-lg bg-gray-50;
}

/* Explore section */
.ai-explore-section {
  @apply flex-1 flex flex-col min-h-0;
}

.ai-explore-messages {
  @apply flex flex-col gap-2 overflow-y-auto mb-3 flex-1 min-h-[100px] max-h-[400px];
}

.ai-explore-message {
  @apply text-xs p-2 rounded-lg leading-relaxed whitespace-pre-wrap;
}

.ai-explore-user {
  @apply bg-blue-100 text-blue-900 self-end max-w-[85%];
}

.ai-explore-assistant {
  @apply bg-gray-100 text-gray-800 self-start;
}

.ai-explore-loading {
  @apply text-xs text-gray-400 animate-pulse self-start;
}

.ai-explore-input-row {
  @apply flex gap-1 mb-3;
}

.ai-explore-input {
  @apply flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none focus:border-blue-400 focus:ring-1 focus:ring-blue-100;
}

.ai-explore-send {
  @apply px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium;
}

.ai-explore-send:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.ai-explore-clear {
  @apply text-xs text-gray-400 hover:text-gray-600 mt-2 self-center;
}

/* Prompt groups */
.ai-prompt-groups {
  @apply flex flex-col gap-2;
}

.ai-prompt-group {
  @apply flex flex-col gap-1;
}

.ai-prompt-group-label {
  @apply text-xs text-gray-500 font-medium;
}

/* Link Modal */
.link-modal-overlay {
  @apply fixed inset-0 bg-black/50 z-50 flex items-center justify-center;
}

.link-modal {
  @apply bg-white rounded-xl shadow-2xl w-[400px] overflow-hidden;
}

.link-modal-header {
  @apply flex items-center justify-between px-4 py-3 border-b border-gray-200;
}

.link-modal-header h3 {
  @apply text-base font-semibold;
}

.link-modal-close {
  @apply w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 text-xl;
}

.link-modal-body {
  @apply p-4 flex flex-col gap-4;
}

.link-modal-field {
  @apply flex flex-col gap-1.5;
}

.link-modal-field label {
  @apply text-sm font-medium text-gray-700;
}

.link-modal-input {
  @apply px-3 py-2 border border-gray-300 rounded-lg text-sm outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100;
}

.link-modal-error {
  @apply text-xs text-red-600;
}

.link-modal-footer {
  @apply flex justify-end gap-2 px-4 py-3 bg-gray-50 border-t border-gray-200;
}

.link-modal-btn {
  @apply px-4 py-2 text-sm font-medium rounded-lg transition-colors;
}

.link-modal-btn-cancel {
  @apply text-gray-700 hover:bg-gray-200;
}

.link-modal-btn-submit {
  @apply bg-blue-600 text-white hover:bg-blue-700;
}

/* Dark mode: Link Modal */
.dark .link-modal {
  @apply bg-gray-800;
}

.dark .link-modal-header {
  @apply border-gray-700;
}

.dark .link-modal-close {
  @apply text-gray-400 hover:text-gray-200 hover:bg-gray-700;
}

.dark .link-modal-field label {
  @apply text-gray-300;
}

.dark .link-modal-input {
  @apply bg-gray-900 border-gray-600 text-gray-200 focus:border-blue-500;
}

.dark .link-modal-footer {
  @apply bg-gray-900 border-gray-700;
}

.dark .link-modal-btn-cancel {
  @apply text-gray-300 hover:bg-gray-700;
}

/* AI Command Palette - Superhuman-style */
.ai-palette-overlay {
  @apply fixed inset-0 bg-black/50 z-50 flex items-start justify-center pt-[12vh];
}

.ai-palette {
  @apply bg-white rounded-xl shadow-2xl w-[520px] max-h-[70vh] flex flex-col overflow-hidden border border-gray-200;
}

.ai-palette-header {
  @apply flex flex-col px-4 py-3 border-b border-gray-100 gap-2;
}

.ai-palette-back {
  @apply self-start px-2 py-1 text-sm text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors -ml-1 mb-1;
}

.ai-palette-image-hint {
  @apply block text-gray-500 text-sm mb-2;
}

.ai-palette-search {
  @apply w-full px-0 py-1 text-base border-0 outline-none placeholder:text-gray-400 bg-transparent;
}

.ai-palette-hint {
  @apply flex gap-3 text-xs text-gray-400;
}

.ai-palette-hint kbd {
  @apply px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono text-[10px];
}

.ai-palette-list {
  @apply flex-1 overflow-y-auto py-2;
}

.ai-palette-group {
  @apply flex flex-col;
}

.ai-palette-group-label {
  @apply px-4 py-1.5 text-xs font-semibold text-gray-400 uppercase tracking-wider;
}

.ai-palette-item {
  @apply flex items-center justify-between w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-50 transition-colors;
}

.ai-palette-item-focused {
  @apply bg-blue-50 text-blue-700;
}

.ai-palette-item-label {
  @apply flex-1;
}

.ai-palette-item-shortcut {
  @apply px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 font-mono text-[10px] ml-2;
}

.ai-palette-item-focused .ai-palette-item-shortcut {
  @apply bg-blue-100 text-blue-600;
}

.ai-palette-empty {
  @apply px-4 py-8 text-sm text-gray-500 text-center;
}

/* Legacy styles kept for sidebar compatibility */
.ai-palette-content {
  @apply flex flex-col p-3 gap-3 overflow-y-auto;
}

.ai-palette-loading {
  @apply text-sm text-gray-400 animate-pulse py-2;
}

.ai-palette-result {
  @apply bg-gray-50 rounded-lg p-3 border border-gray-200;
}

.ai-palette-result pre {
  @apply whitespace-pre-wrap text-sm leading-relaxed mb-3 max-h-48 overflow-y-auto;
}

.ai-palette-result-actions {
  @apply flex gap-2;
}

.ai-palette-apply {
  @apply flex-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors;
}

.ai-palette-dismiss {
  @apply flex-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors;
}

.ai-palette-input {
  @apply flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg outline-none focus:border-blue-400 focus:ring-2 focus:ring-blue-100;
}

.ai-palette-send {
  @apply px-3 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors font-medium;
}

.ai-palette-send:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.ai-palette-ask-btn {
  @apply w-full px-3 py-2 text-sm text-left border border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-gray-400 hover:text-gray-700 transition-colors;
}

/* AI Chat in Sidebar */
.ai-chat {
  @apply flex flex-col flex-1 min-h-0;
}

.ai-chat-messages {
  @apply flex flex-col gap-3 overflow-y-auto flex-1 min-h-0 p-3;
}

.ai-chat-message {
  @apply flex flex-col gap-2;
}

.ai-chat-user {
  @apply self-end max-w-[90%];
}

.ai-chat-user .ai-chat-content {
  @apply bg-blue-100 text-blue-900 text-sm p-3 rounded-lg rounded-br-sm leading-relaxed whitespace-pre-wrap;
}

.ai-chat-assistant {
  @apply self-start max-w-[95%];
}

.ai-chat-assistant .ai-chat-content {
  @apply bg-gray-100 text-gray-800 text-sm p-3 rounded-lg rounded-bl-sm leading-relaxed whitespace-pre-wrap;
}

.ai-chat-loading {
  @apply text-sm text-gray-400 animate-pulse;
}

.ai-insert-actions {
  @apply flex gap-2 mt-2;
}

.ai-insert-btn {
  @apply px-3 py-1.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors font-medium;
}

.ai-reject-btn {
  @apply px-3 py-1.5 bg-gray-200 text-gray-700 text-xs rounded hover:bg-gray-300 transition-colors;
}

/* Track changes toggle bar */
.ai-diff-toggle-bar {
  @apply px-3 py-2 border-b border-gray-200 bg-gray-50 flex flex-col gap-2;
}

.ai-diff-label {
  @apply text-xs text-gray-500 truncate;
}

.ai-diff-toggle-btn {
  @apply w-full px-3 py-1.5 text-xs font-medium rounded border border-gray-300 bg-white hover:bg-gray-100 transition-colors;
}

.ai-diff-toggle-active {
  @apply bg-blue-50 border-blue-300 text-blue-700 hover:bg-blue-100;
}

/* Legacy toggle (keep for reference) */
.ai-track-toggle {
  @apply flex items-center gap-1.5 text-xs text-gray-500 cursor-pointer select-none;
}

.ai-track-toggle input {
  @apply w-3 h-3 accent-blue-600;
}

/* Diff view */
.ai-chat-diff {
  @apply bg-gray-50 rounded-lg p-3 border border-gray-200;
}

.diff-view-container {
  @apply text-sm leading-relaxed;
}

.diff-content {
  @apply whitespace-pre-wrap;
}

.diff-equal {
  @apply text-gray-700;
}

.diff-insert {
  @apply bg-green-100 text-green-800 rounded-sm px-0.5;
}

.diff-delete {
  @apply bg-red-100 text-red-800 line-through rounded-sm px-0.5;
}

.diff-no-changes {
  @apply text-gray-400 text-sm italic;
}

/* Dark mode: Diff view */
.dark .ai-chat-diff {
  @apply bg-gray-900 border-gray-700;
}

.dark .diff-equal {
  @apply text-gray-300;
}

.dark .diff-insert {
  @apply bg-green-900 text-green-200;
}

.dark .diff-delete {
  @apply bg-red-900 text-red-200;
}

.dark .ai-reject-btn {
  @apply bg-gray-700 text-gray-300 hover:bg-gray-600;
}

.dark .ai-track-toggle {
  @apply text-gray-400;
}

.dark .ai-diff-toggle-bar {
  @apply border-gray-700 bg-gray-800;
}

.dark .ai-diff-toggle-btn {
  @apply border-gray-600 bg-gray-700 text-gray-300 hover:bg-gray-600;
}

.dark .ai-diff-toggle-active {
  @apply bg-blue-900 border-blue-700 text-blue-300 hover:bg-blue-800;
}

.ai-chat-input-container {
  @apply flex-shrink-0 flex gap-2 p-3 border-t border-gray-200;
}

.ai-chat-input {
  @apply flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg outline-none focus:border-blue-400 focus:ring-1 focus:ring-blue-100;
}

.ai-chat-send {
  @apply px-3 py-2 text-sm border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors font-medium;
}

.ai-chat-send:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.ai-model-picker {
  @apply text-xs bg-transparent border border-gray-300 rounded px-1.5 py-0.5 text-gray-600 outline-none cursor-pointer;
}

.ai-model-picker:focus {
  @apply border-blue-400 ring-1 ring-blue-100;
}

.dark .ai-model-picker {
  @apply border-gray-600 text-gray-300 bg-gray-800;
}

.dark .ai-model-picker:focus {
  @apply border-blue-500 ring-blue-900;
}

.ai-header-actions {
  @apply flex items-center gap-2;
}

.ai-clear-btn {
  @apply text-xs text-gray-400 hover:text-gray-600;
}

/* Dark mode: AI Chat */
.dark .ai-chat-user .ai-chat-content {
  @apply bg-blue-900 text-blue-100;
}

.dark .ai-chat-assistant .ai-chat-content {
  @apply bg-gray-700 text-gray-200;
}

.dark .ai-chat-input-container {
  @apply border-gray-700;
}

.dark .ai-chat-input {
  @apply bg-gray-900 border-gray-600 text-gray-200;
}

.dark .ai-chat-send {
  @apply border-gray-600 text-gray-300 hover:bg-gray-700;
}

.dark .ai-clear-btn {
  @apply text-gray-500 hover:text-gray-300;
}

/* Chat hint (inline empty state) */
.ai-chat-hint {
  @apply text-xs text-gray-400 text-center py-4;
}

.ai-chat-hint kbd {
  @apply font-mono bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200;
}

/* Version panel */
.version-panel {
  @apply w-72 border-l border-gray-200 bg-white flex flex-col overflow-y-auto;
}

.version-panel-header {
  @apply flex items-center justify-between p-3 border-b border-gray-200;
}

.version-panel-header h3 {
  @apply text-sm font-semibold;
}

.version-panel-actions {
  @apply flex items-center gap-2;
}

.version-panel-close {
  @apply w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100;
}

.version-panel-list {
  @apply flex-1 overflow-y-auto;
}

.version-panel-empty {
  @apply p-3 text-xs text-gray-400;
}

.version-item {
  @apply flex items-center justify-between px-3 py-2 border-b border-gray-100 hover:bg-gray-50;
}

.version-item-info {
  @apply flex flex-col;
}

.version-item-time {
  @apply text-xs font-medium;
}

.version-item-words {
  @apply text-xs text-gray-400;
}

.version-item-restore {
  @apply text-xs text-blue-600 hover:text-blue-800;
}

/* Shortcut cheatsheet */
.cheatsheet-overlay {
  @apply fixed inset-0 bg-black/50 z-50 flex items-center justify-center;
}

.cheatsheet {
  @apply bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6;
}

.cheatsheet-header {
  @apply flex items-center justify-between mb-4;
}

.cheatsheet-header h2 {
  @apply text-lg font-bold;
}

.cheatsheet-close {
  @apply w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 text-xl;
}

.cheatsheet-grid {
  @apply grid grid-cols-2 gap-6;
}

.cheatsheet-section h3 {
  @apply text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2;
}

.cheatsheet-row {
  @apply flex items-center justify-between py-1;
}

.cheatsheet-row kbd {
  @apply text-xs font-mono bg-gray-100 px-1.5 py-0.5 rounded border border-gray-200;
}

.cheatsheet-row span {
  @apply text-sm text-gray-600;
}

/* Dark mode */
.dark body,
.dark .ProseMirror {
  @apply bg-gray-900 text-gray-100;
}

.dark .toolbar {
  @apply bg-gray-800 border-gray-700;
}

.dark .toolbar-btn {
  @apply border-gray-600 text-gray-300 hover:bg-gray-700;
}

.dark .toolbar-shortcut {
  @apply bg-gray-600 text-gray-200;
}

.dark .toolbar-btn-active {
  @apply bg-gray-700 border-gray-500;
}

.dark .toolbar-btn-accept {
  @apply border-green-600 text-green-400 hover:bg-green-900/30;
}

.dark .toolbar-btn-reject {
  @apply border-red-600 text-red-400 hover:bg-red-900/30;
}

.dark .toolbar-separator {
  @apply bg-gray-600;
}

.dark .toolbar-toggle {
  @apply text-gray-400;
}

.dark .toolbar-switch {
  @apply text-gray-400 hover:text-gray-200;
}

.dark .toolbar-switch-track {
  @apply bg-gray-600;
}

.dark .toolbar-switch-on .toolbar-switch-track {
  @apply bg-blue-500;
}

.dark .toolbar-switch-label {
  @apply text-gray-400;
}

.dark .toolbar-switch-on .toolbar-switch-label {
  @apply text-blue-400;
}

.dark .toolbar-image-input {
  @apply bg-gray-800 border-gray-600 text-gray-200;
}

.dark .status-bar {
  @apply bg-gray-800 border-gray-700 text-gray-400;
}

.dark .bubble-menu {
  @apply bg-gray-800 border-gray-700;
}

.dark .bubble-btn {
  @apply text-gray-300 hover:bg-gray-700;
}

.dark .bubble-btn-active {
  @apply bg-gray-700;
}

.dark .slash-menu {
  @apply bg-gray-800 border-gray-700;
}

.dark .slash-menu-item:hover,
.dark .slash-menu-item-active {
  @apply bg-gray-700;
}

.dark .slash-menu-title {
  @apply text-gray-200;
}

.dark .command-palette {
  @apply bg-gray-800 border-gray-700;
}

.dark .command-palette-item:hover {
  @apply bg-gray-700;
}

.dark .command-palette-shortcut {
  @apply bg-gray-700 text-gray-400;
}

.dark .diff-view {
  @apply bg-gray-800 border-gray-700;
}

.dark .ai-sidebar {
  @apply bg-gray-800 border-gray-700;
}

.dark .ai-sidebar-header {
  @apply border-gray-700;
}

.dark .ai-action-btn {
  @apply border-gray-600 text-gray-300 hover:bg-gray-700;
}

.dark .ai-action-row:hover {
  @apply bg-gray-700;
}

.dark .ai-action-key {
  @apply bg-gray-700 text-gray-400;
}

.dark .ai-sidebar-result {
  @apply bg-gray-900 border-gray-700;
}

.dark .ai-edit-result {
  @apply bg-gray-900 border-gray-700;
}

.dark .ai-chip {
  @apply border-gray-600 text-gray-300 hover:bg-gray-700 hover:border-gray-500;
}

.dark .ai-explore-user {
  @apply bg-blue-900 text-blue-100;
}

.dark .ai-explore-assistant {
  @apply bg-gray-700 text-gray-200;
}

.dark .ai-explore-input {
  @apply bg-gray-800 border-gray-600 text-gray-200;
}

.dark .ai-explore-send {
  @apply border-gray-600 text-gray-300 hover:bg-gray-700;
}

.dark .ai-result-close {
  @apply text-gray-500 hover:text-gray-300 hover:bg-gray-700;
}

.dark .ai-collapse-btn {
  @apply text-gray-500 hover:text-gray-300 hover:bg-gray-700;
}

.dark .ai-edit-group-btn {
  @apply border-gray-600 text-gray-300 hover:bg-gray-700;
}

.dark .ai-edit-group-btn-active {
  @apply bg-gray-700 border-gray-500;
}

.dark .ai-edit-group-options {
  @apply border-gray-600 bg-gray-800;
}

/* Dark mode: AI Palette */
.dark .ai-palette {
  @apply bg-gray-800 border-gray-700;
}

.dark .ai-palette-header {
  @apply border-gray-700;
}

.dark .ai-palette-search {
  @apply text-gray-200 placeholder:text-gray-500;
}

.dark .ai-palette-hint {
  @apply text-gray-500;
}

.dark .ai-palette-hint kbd {
  @apply bg-gray-700 text-gray-400;
}

.dark .ai-palette-group-label {
  @apply text-gray-500;
}

.dark .ai-palette-item {
  @apply text-gray-300 hover:bg-gray-700;
}

.dark .ai-palette-item-focused {
  @apply bg-blue-900 text-blue-200;
}

.dark .ai-palette-item-shortcut {
  @apply bg-gray-700 text-gray-400;
}

.dark .ai-palette-item-focused .ai-palette-item-shortcut {
  @apply bg-blue-800 text-blue-300;
}

.dark .ai-palette-empty {
  @apply text-gray-500;
}

.dark .ai-palette-result {
  @apply bg-gray-900 border-gray-700;
}

.dark .ai-palette-input {
  @apply bg-gray-900 border-gray-600 text-gray-200;
}

.dark .ai-palette-send {
  @apply border-gray-600 text-gray-300 hover:bg-gray-700;
}

.dark .ai-palette-ask-btn {
  @apply border-gray-600 text-gray-400 hover:border-gray-500 hover:text-gray-300;
}

.dark .ai-chat-hint {
  @apply text-gray-500;
}

.dark .ai-chat-hint kbd {
  @apply bg-gray-700 border-gray-600;
}

.dark .version-panel {
  @apply bg-gray-800 border-gray-700;
}

.dark .version-panel-header {
  @apply border-gray-700;
}

.dark .version-item {
  @apply border-gray-700 hover:bg-gray-700;
}

.dark .cheatsheet {
  @apply bg-gray-800;
}

.dark .cheatsheet-row kbd {
  @apply bg-gray-700 border-gray-600;
}

.dark .cheatsheet-row span {
  @apply text-gray-300;
}

.dark .ProseMirror .callout {
  @apply bg-gray-800;
}

.dark .ProseMirror table td,
.dark .ProseMirror table th {
  @apply border-gray-600;
}

.dark .ProseMirror table th {
  @apply bg-gray-800;
}

.dark .ProseMirror blockquote {
  @apply border-gray-600 text-gray-400;
}

.dark .ProseMirror code {
  @apply bg-gray-800 text-pink-400;
}

.dark .ProseMirror hr {
  @apply border-gray-700;
}

.dark .ProseMirror a {
  @apply text-blue-400;
}

.dark .ProseMirror mark {
  @apply bg-yellow-800 text-yellow-200;
}

.dark .ghost-text {
  @apply text-gray-600;
}

/* Dark mode: Mencken legend */
.dark .mencken-legend-red {
  @apply bg-red-900/50 text-red-300;
}

.dark .mencken-legend-green {
  @apply bg-green-900/50 text-green-300;
}

.dark .mencken-legend-blue {
  @apply bg-blue-900/50 text-blue-300;
}

.dark .mencken-legend-purple {
  @apply bg-purple-900/50 text-purple-300;
}

.dark .mencken-legend-orange {
  @apply bg-orange-900/50 text-orange-300;
}

/* Mencken Panel */
.mencken-panel {
  @apply w-80 h-full bg-white border-l border-gray-200 flex flex-col overflow-hidden;
}

.mencken-panel-header {
  @apply flex items-center justify-between px-4 py-3 border-b border-gray-200;
}

.mencken-panel-header h3 {
  @apply text-base font-semibold text-gray-900;
}

.mencken-panel-close {
  @apply text-gray-400 hover:text-gray-600 text-xl font-light leading-none;
}

.mencken-panel-legend {
  @apply px-4 py-3 border-b border-gray-200;
}

.mencken-panel-legend h4 {
  @apply text-xs font-medium text-gray-500 uppercase tracking-wide mb-2;
}

.mencken-legend-grid {
  @apply grid grid-cols-2 gap-2;
}

.mencken-legend-item {
  @apply flex items-center gap-2 text-sm;
}

.mencken-legend-dot {
  @apply w-3 h-3 rounded-full flex-shrink-0;
}

.mencken-legend-label {
  @apply text-gray-700 flex-1;
}

.mencken-legend-count {
  @apply text-gray-400 text-xs;
}

.mencken-panel-summary {
  @apply flex items-center justify-between px-4 py-2 bg-gray-50 border-b border-gray-200;
}

.mencken-panel-summary span {
  @apply text-sm text-gray-600;
}

.mencken-analyze-btn {
  @apply px-3 py-1 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed;
}

.mencken-panel-issues {
  @apply flex-1 overflow-y-auto p-3 space-y-2;
}

.mencken-empty {
  @apply text-center text-gray-500 py-8;
}

.mencken-issue-card {
  @apply bg-gray-50 rounded-lg p-3 border border-gray-200;
}

.mencken-issue-header {
  @apply flex items-center gap-2 cursor-pointer mb-1;
}

.mencken-issue-badge {
  @apply px-2 py-0.5 text-xs font-medium text-white rounded flex-shrink-0;
}

.mencken-issue-text {
  @apply text-sm text-gray-800 truncate;
}

.mencken-issue-message {
  @apply text-xs text-gray-500 mb-2;
}

.mencken-suggest-btn {
  @apply text-xs text-blue-600 hover:text-blue-800 underline;
}

.mencken-issue-suggestion {
  @apply mt-2 pt-2 border-t border-gray-200;
}

.mencken-suggestion-loading {
  @apply text-xs text-gray-400 italic;
}

.mencken-suggestion-text {
  @apply text-sm text-gray-700 mb-2 bg-green-50 p-2 rounded border border-green-200;
}

.mencken-apply-btn {
  @apply px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700;
}

.mencken-more {
  @apply text-center text-gray-500 text-sm py-2;
}

/* Dark mode: Mencken Panel */
.dark .mencken-panel {
  @apply bg-gray-900 border-gray-700;
}

.dark .mencken-panel-header {
  @apply border-gray-700;
}

.dark .mencken-panel-header h3 {
  @apply text-gray-100;
}

.dark .mencken-panel-close {
  @apply text-gray-500 hover:text-gray-300;
}

.dark .mencken-panel-legend {
  @apply border-gray-700;
}

.dark .mencken-panel-legend h4 {
  @apply text-gray-400;
}

.dark .mencken-legend-label {
  @apply text-gray-300;
}

.dark .mencken-legend-count {
  @apply text-gray-500;
}

.dark .mencken-panel-summary {
  @apply bg-gray-800 border-gray-700;
}

.dark .mencken-panel-summary span {
  @apply text-gray-400;
}

.dark .mencken-issue-card {
  @apply bg-gray-800 border-gray-700;
}

.dark .mencken-issue-text {
  @apply text-gray-200;
}

.dark .mencken-issue-message {
  @apply text-gray-400;
}

.dark .mencken-suggest-btn {
  @apply text-blue-400 hover:text-blue-300;
}

.dark .mencken-issue-suggestion {
  @apply border-gray-700;
}

.dark .mencken-suggestion-loading {
  @apply text-gray-500;
}

.dark .mencken-suggestion-text {
  @apply text-gray-200 bg-green-900/30 border-green-800;
}

.dark .mencken-empty {
  @apply text-gray-500;
}

.dark .mencken-more {
  @apply text-gray-500;
}


/* AI Image Generation */
.ai-image-gen {
  @apply px-4 py-3 border-b border-gray-200;
}

.ai-image-gen-header {
  @apply flex items-center gap-2 mb-2;
}

.ai-image-gen-icon {
  @apply text-base;
}

.ai-image-gen-title {
  @apply text-sm font-medium text-gray-700;
}

.ai-image-gen-form {
  @apply flex gap-2;
}

.ai-image-gen-input {
  @apply flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
}

.ai-image-gen-btn {
  @apply px-3 py-1.5 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors;
}

.ai-image-gen-hint {
  @apply block mt-1.5 text-xs text-gray-500;
}

/* Dark mode: AI Image Generation */
.dark .ai-image-gen {
  @apply border-gray-700;
}

.dark .ai-image-gen-title {
  @apply text-gray-300;
}

.dark .ai-image-gen-input {
  @apply bg-gray-800 border-gray-600 text-gray-200 placeholder-gray-500;
}

.dark .ai-image-gen-hint {
  @apply text-gray-500;
}

/* Track Changes Panel */
/* Snapshot Timeline */
.snapshot-timeline {
  @apply border-t border-gray-200;
}

.snapshot-timeline-header {
  @apply flex items-center justify-between px-3 py-2;
}

.snapshot-timeline-toggle {
  @apply flex items-center gap-1.5 text-sm font-medium text-gray-700 hover:text-gray-900;
}

.snapshot-timeline-arrow {
  @apply text-xs text-gray-400;
}

.snapshot-timeline-count {
  @apply text-xs text-gray-400 ml-1;
}

.snapshot-save-btn {
  @apply text-xs text-blue-600 hover:text-blue-800 font-medium;
}

.snapshot-timeline-list {
  @apply px-3 pb-3 space-y-1 max-h-64 overflow-y-auto;
}

.snapshot-empty {
  @apply text-sm text-gray-500 text-center py-3;
}

.snapshot-compare-bar {
  @apply flex items-center gap-2 mb-2;
}

.snapshot-compare-btn {
  @apply px-2.5 py-1 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700;
}

.snapshot-clear-btn {
  @apply px-2 py-1 text-xs text-gray-500 hover:text-gray-700;
}

.snapshot-diff-overlay {
  @apply mb-2 p-2 bg-gray-50 rounded border border-gray-200 max-h-48 overflow-y-auto text-sm;
}

.snapshot-item {
  @apply flex items-center gap-2 py-1.5 px-2 rounded text-sm hover:bg-gray-50;
}

.snapshot-item-selected {
  @apply bg-blue-50 hover:bg-blue-50;
}

.snapshot-item-select {
  @apply flex-shrink-0;
}

.snapshot-checkbox {
  @apply block w-3.5 h-3.5 rounded border border-gray-300 cursor-pointer;
}

.snapshot-checkbox-checked {
  @apply bg-blue-600 border-blue-600;
}

.snapshot-item-info {
  @apply flex items-center gap-1.5 flex-1 min-w-0;
}

.snapshot-item-time {
  @apply text-gray-500 text-xs whitespace-nowrap;
}

.snapshot-item-trigger {
  @apply text-[10px] px-1 py-0.5 rounded font-medium;
}

.snapshot-trigger-auto {
  @apply bg-gray-100 text-gray-500;
}

.snapshot-trigger-manual {
  @apply bg-blue-100 text-blue-700;
}

.snapshot-trigger-ai-before {
  @apply bg-amber-100 text-amber-700;
}

.snapshot-trigger-ai-after {
  @apply bg-purple-100 text-purple-700;
}

.snapshot-item-words {
  @apply text-xs text-gray-400;
}

.snapshot-item-label {
  @apply text-xs text-gray-600 truncate flex-1 min-w-0;
}

.snapshot-restore-btn {
  @apply text-xs text-blue-600 hover:text-blue-800 flex-shrink-0;
}

.snapshot-show-more {
  @apply text-xs text-gray-500 hover:text-gray-700 text-center w-full py-1.5;
}

/* Dark mode: Snapshot Timeline */
.dark .snapshot-timeline {
  @apply border-gray-700;
}

.dark .snapshot-timeline-toggle {
  @apply text-gray-300 hover:text-gray-100;
}

.dark .snapshot-timeline-arrow {
  @apply text-gray-500;
}

.dark .snapshot-timeline-count {
  @apply text-gray-500;
}

.dark .snapshot-save-btn {
  @apply text-blue-400 hover:text-blue-300;
}

.dark .snapshot-empty {
  @apply text-gray-500;
}

.dark .snapshot-diff-overlay {
  @apply bg-gray-800 border-gray-700;
}

.dark .snapshot-item {
  @apply hover:bg-gray-800;
}

.dark .snapshot-item-selected {
  @apply bg-blue-900/30 hover:bg-blue-900/30;
}

.dark .snapshot-checkbox {
  @apply border-gray-600;
}

.dark .snapshot-item-time {
  @apply text-gray-400;
}

.dark .snapshot-trigger-auto {
  @apply bg-gray-800 text-gray-400;
}

.dark .snapshot-trigger-manual {
  @apply bg-blue-900/40 text-blue-400;
}

.dark .snapshot-trigger-ai-before {
  @apply bg-amber-900/40 text-amber-400;
}

.dark .snapshot-trigger-ai-after {
  @apply bg-purple-900/40 text-purple-400;
}

.dark .snapshot-item-words {
  @apply text-gray-500;
}

.dark .snapshot-item-label {
  @apply text-gray-400;
}

.dark .snapshot-restore-btn {
  @apply text-blue-400 hover:text-blue-300;
}

.dark .snapshot-show-more {
  @apply text-gray-500 hover:text-gray-400;
}

/* Scratchpad Panel */
.scratchpad {
  @apply w-80 flex-shrink-0 h-full border-r border-gray-200 bg-white flex flex-col overflow-hidden transition-all duration-200;
}

.scratchpad-collapsed {
  @apply w-0 border-r-0;
}

.scratchpad-header {
  @apply flex items-center justify-between px-4 py-3 border-b border-gray-200 flex-shrink-0;
}

.scratchpad-header h3 {
  @apply text-base font-semibold text-gray-900;
}

.scratchpad-collapse-btn {
  @apply w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100 text-sm;
}

.scratchpad-add-btn {
  @apply mx-3 mt-3 px-3 py-1.5 text-xs font-medium border border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-gray-400 hover:text-gray-700 hover:bg-gray-50 transition-colors flex-shrink-0;
}

.scratchpad-notes {
  @apply flex-1 overflow-y-auto p-3 space-y-3;
}

.scratchpad-empty {
  @apply text-sm text-gray-400 text-center py-8 px-4;
}

.scratchpad-note {
  @apply bg-gray-50 rounded-lg border border-gray-200 overflow-hidden;
}

.scratchpad-note-header {
  @apply flex items-center justify-between px-3 py-1.5 bg-gray-100;
}

.scratchpad-note-time {
  @apply text-[10px] text-gray-400 font-medium;
}

.scratchpad-note-delete {
  @apply w-5 h-5 flex items-center justify-center text-gray-300 hover:text-red-500 rounded hover:bg-red-50 text-xs transition-colors;
}

.scratchpad-note-textarea {
  @apply w-full px-3 py-2 text-sm bg-transparent border-0 outline-none resize-none leading-relaxed placeholder:text-gray-400 min-h-[60px];
}

.scratchpad-footer {
  @apply flex-shrink-0 border-t border-gray-200 p-3 pb-8;
}

.scratchpad-footer-label {
  @apply text-[10px] font-medium uppercase tracking-wide text-gray-400 mb-2;
}

.scratchpad-actions {
  @apply flex gap-1.5;
}

.scratchpad-action-btn {
  @apply flex-1 px-2 py-1.5 text-xs font-medium border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-center;
}

.scratchpad-action-btn:disabled {
  @apply opacity-40 cursor-not-allowed hover:bg-transparent;
}

.scratchpad-undo {
  @apply flex items-center justify-between px-3 py-2 text-xs text-gray-500 bg-gray-100 rounded-lg border border-gray-200;
}

.scratchpad-undo-btn {
  @apply text-blue-600 hover:text-blue-800 font-medium;
}

/* Dark mode: Scratchpad */
.dark .scratchpad {
  @apply bg-gray-900 border-gray-700;
}

.dark .scratchpad-header {
  @apply border-gray-700;
}

.dark .scratchpad-header h3 {
  @apply text-gray-100;
}

.dark .scratchpad-collapse-btn {
  @apply text-gray-500 hover:text-gray-300 hover:bg-gray-700;
}

.dark .scratchpad-add-btn {
  @apply border-gray-600 text-gray-400 hover:border-gray-500 hover:text-gray-300 hover:bg-gray-800;
}

.dark .scratchpad-note {
  @apply bg-gray-800 border-gray-700;
}

.dark .scratchpad-note-header {
  @apply bg-gray-800;
}

.dark .scratchpad-note-time {
  @apply text-gray-500;
}

.dark .scratchpad-note-delete {
  @apply text-gray-600 hover:text-red-400 hover:bg-red-900/30;
}

.dark .scratchpad-note-textarea {
  @apply text-gray-200 placeholder:text-gray-600;
}

.dark .scratchpad-footer {
  @apply border-gray-700;
}

.dark .scratchpad-footer-label {
  @apply text-gray-500;
}

.dark .scratchpad-action-btn {
  @apply border-gray-600 text-gray-300 hover:bg-gray-700;
}

.dark .scratchpad-empty {
  @apply text-gray-500;
}

.dark .scratchpad-undo {
  @apply bg-gray-800 border-gray-700 text-gray-400;
}

.dark .scratchpad-undo-btn {
  @apply text-blue-400 hover:text-blue-300;
}

/* Sidebar Container */
.sidebar-container {
  @apply flex-shrink-0 h-full flex flex-col;
}

/* Document App Layout */
.document-app {
  @apply flex h-screen w-screen;
}

.document-app-loading {
  @apply flex items-center justify-center h-screen w-screen;
}

.loading-spinner {
  @apply w-6 h-6 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin;
}

.document-sidebar {
  @apply flex-shrink-0 w-56 h-full bg-gray-100 border-r border-gray-200 flex flex-col relative;
  transition: width 0.2s ease;
}

.sidebar-collapsed .document-sidebar {
  @apply w-10;
}

.sidebar-toggle {
  @apply absolute top-3 right-2 w-6 h-6 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors z-10;
}

.sidebar-collapsed .sidebar-toggle {
  @apply right-2;
}

.document-editor-container {
  @apply flex-1 min-w-0 h-full overflow-hidden;
}

/* Document List */
.document-list {
  @apply flex flex-col h-full pt-10;
}

.document-list-header {
  @apply flex items-center justify-between px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wide;
}

.document-new-btn {
  @apply w-6 h-6 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded transition-colors;
}

.document-list-items {
  @apply flex-1 overflow-y-auto px-2;
}

.document-list-empty {
  @apply flex flex-col items-center justify-center py-8 text-center;
}

.document-list-empty p {
  @apply text-sm text-gray-500 mb-3;
}

.document-create-btn {
  @apply text-sm text-blue-600 hover:text-blue-700 font-medium;
}

.document-item {
  @apply flex items-center justify-between px-3 py-2 rounded-lg mb-1 cursor-pointer hover:bg-gray-200 transition-colors;
}

.document-item.active {
  @apply bg-white shadow-sm;
}

.document-item-content {
  @apply flex flex-col min-w-0 flex-1;
}

.document-title {
  @apply text-sm font-medium truncate;
}

.document-date {
  @apply text-xs text-gray-500;
}

.document-delete-btn {
  @apply w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500 rounded opacity-0 group-hover:opacity-100 transition-all;
}

/* Document title row with status */
.document-title-row {
  @apply flex items-center gap-1.5 min-w-0;
}

.document-status-dot-inline {
  @apply w-2 h-2 rounded-full flex-shrink-0;
}

.document-status-wrapper {
  @apply relative flex-shrink-0;
}

.document-status-caret {
  @apply w-4 h-4 flex items-center justify-center text-gray-400 rounded opacity-0 transition-opacity;
}

.document-item:hover .document-status-caret {
  @apply opacity-100;
}

.document-status-picker {
  @apply absolute right-0 top-5 z-20 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[120px];
}

.document-status-option {
  @apply flex items-center gap-2 w-full px-3 py-1.5 text-xs text-left text-gray-700 hover:bg-gray-50 transition-colors;
}

.document-status-option-active {
  @apply bg-gray-100 font-medium;
}

.document-status-dot-sm {
  @apply w-2 h-2 rounded-full flex-shrink-0;
}

/* Status save indicator */
.status-save {
  @apply transition-colors;
}

.status-save.saving {
  @apply text-amber-600;
}

.status-save.saved {
  @apply text-green-600;
}

/* Dark mode */
.dark .document-sidebar {
  @apply bg-gray-900 border-gray-800;
}

.dark .sidebar-toggle {
  @apply text-gray-400 hover:text-gray-200 hover:bg-gray-800;
}

.dark .document-list-header {
  @apply text-gray-400;
}

.dark .document-new-btn {
  @apply text-gray-400 hover:text-gray-200 hover:bg-gray-800;
}

.dark .document-item {
  @apply hover:bg-gray-800;
}

.dark .document-item.active {
  @apply bg-gray-800;
}

.dark .document-title {
  @apply text-gray-200;
}

.dark .document-date {
  @apply text-gray-500;
}

.dark .document-delete-btn {
  @apply text-gray-500 hover:text-red-400;
}

.dark .document-list-empty p {
  @apply text-gray-500;
}

.dark .document-create-btn {
  @apply text-blue-400 hover:text-blue-300;
}

.dark .document-status-caret {
  @apply text-gray-500;
}

.dark .document-status-picker {
  @apply bg-gray-800 border-gray-700;
}

.dark .document-status-option {
  @apply text-gray-300 hover:bg-gray-700;
}

.dark .document-status-option-active {
  @apply bg-gray-700;
}

.dark .loading-spinner {
  @apply border-gray-700 border-t-gray-400;
}

.dark .status-save.saving {
  @apply text-amber-500;
}

.dark .status-save.saved {
  @apply text-green-500;
}

/* User menu */
.user-menu {
  @apply absolute top-full right-0 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[160px] z-20;
}

.user-menu-status {
  @apply px-3 py-1.5 text-xs text-gray-400 border-b border-gray-100;
}

.user-menu-item {
  @apply flex items-center w-full px-3 py-2 text-sm text-left text-gray-700 hover:bg-gray-50 transition-colors;
}

/* Dark mode: User menu */
.dark .user-menu {
  @apply bg-gray-800 border-gray-700;
}

.dark .user-menu-status {
  @apply text-gray-500 border-gray-700;
}

.dark .user-menu-item {
  @apply text-gray-300 hover:bg-gray-700;
}

/* Editor lock warning */
.editor-lock-warning {
  @apply bg-yellow-50 border-b border-yellow-200 px-4 py-3 text-sm text-yellow-900 text-center;
}

.dark .editor-lock-warning {
  @apply bg-yellow-900/20 border-yellow-800/30 text-yellow-200;
}

/* Landing page */
.landing-page {
  @apply min-h-screen flex items-center justify-center bg-gray-50;
}

.landing-content {
  @apply text-center px-8;
}

.landing-title {
  @apply text-5xl font-light tracking-tight text-gray-900 mb-3;
  font-family: 'Georgia', 'Times New Roman', serif;
}

.landing-subtitle {
  @apply text-lg text-gray-500 mb-8;
}

.landing-cta {
  @apply px-6 py-3 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors;
}

.dark .landing-page {
  @apply bg-gray-950;
}

.dark .landing-title {
  @apply text-gray-100;
}

.dark .landing-subtitle {
  @apply text-gray-500;
}

.dark .landing-cta {
  @apply bg-gray-100 text-gray-900 hover:bg-white;
}
